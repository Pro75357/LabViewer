<head>
  <title>LabViewer</title>
</head>

<body>
    {{> header}}
    <br />
    {{> serverSelect}}
    {{> patientSelect}}
</body>

<template name="header">
  <div class="container bg-primary text-white">
      <h1>Welcome to LabViewer!</h1>
      <div class="row">
          <div class="col-md-4">
              This application demonstrates the ability to view laboratory data from across a variety of data sources using the FHIR standard.
          </div>
          <div class="col-md-4">
              First, select a FHIR server (open servers only) and then search for a patient.
          </div>
          <div class="col-md-4">
              Once a patient is selected, laboratory information will be retrieved and viewable below
          </div>
      </div>

  </div>
</template>

<template name="serverSelect">
    <div class="container bg-info text-white">
        <h3>Please select a server</h3>
        <div class="row">
            <div class="col-md-9">
                <form>
                    <select class="serverList">
                        <option value="null">Select one...</option>
                        {{#each server}}
                        <option value="{{@index}}">{{name}}</option>
                        {{/each}}
                    </select>
                </form>
            </div>
            <div class="col-md-3 bg-success">
                Server: {{selectedServer}}
            </div>
        </div>
        
    </div>
</template>

<template name="patientSelect">
    <div class="container bg-info text-white">
        <h3>Please select a patient</h3>
        <div class="row">
            <div class="col-md-9">
                <form>
                    <select name="list">
                        {{#each patients}}
                        <option value="{{@index}}">{{name}}</option>
                        {{/each}}
                    </select>
                    <button type="submit">Go!</button>
                </form>
            </div>
            <div class="col-md-3 bg-success">
                Patient: {{selectedPatient}}
            </div>
        </div>
    </div>
</template>